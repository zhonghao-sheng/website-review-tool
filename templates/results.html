<!DOCTYPE html>
<html>
<head>
    <title>Results</title>
    <script>
        // Assuming you have the job ID available in your template context
        const jobId = "{{ job_id }}";  // Pass the job ID from Django context

        window.addEventListener('beforeunload', function (event) {
            // Trigger an API call to stop the job
            fetch("{% url 'stop_job' job_id=job_id %}", {
                method: 'POST',
                headers: {
                    'X-CSRFToken': '{{ csrf_token }}',
        });
    </script>
</head>
<body>
    <h1>Search Results</h1>
    <ul>
        {% for result in results %}
            <li>{{ result }}</li>
        {% endfor %}
    </ul>
</body>
</html>
